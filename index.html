<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title> Soccer Physics </title>
    <style type="text/css">
        html, body {
            width: 100%;
            height: 100%;
            min-width: 100%;
            min-height: 100%;
        }
        body {
            color: #2a324b;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #e1e5ee;
        }
        canvas {
            border: 2px solid #A4DDD8;
            background-color: #fbfcff;
        }
    </style>
</head>
<body>
    <canvas id="c"></canvas>
    <script type="text/javascript">

            const canvas = document.getElementById("c");
            const ctx = canvas.getContext("2d");
            const W = 900;
            const H = 600;
            const FPS = 30;
            const _DEBUG = false;
            const floor = 3*H/4;
            const len_ball = 128;
            const h_net = 400;
            const w_net = 180;

            const sprites = new Image();
            sprites.src = "images/ball.png";
            const netImage = new Image();
            netImage.src = "images/net-left.jpg";
            const net2Image = new Image();
            net2Image.src = "images/net-right.jpg";

            let keys = {};

            let ball = {
                x: 3*((W-len_ball)/2)+len_ball,
                y: (floor-len_ball/3),
                floor: 3*(floor-len_ball/3)
            };

            let t = 1;
            let game = "game";

            function documentation() {

                document.onkeydown = function keydown(e) {
                    if(!e.isTrusted) return;
                    keys[e.key] = true;
                }

                document.onkeyup = function keyup(e) {
                    if(!e.isTrusted) return;
                    keys[e.key] = false;
                }

            }

            function init() {
                documentation();
                canvas.width = W;
                canvas.height = H;
                ctx.mozImageSmoothingEnabled = false;
                ctx.webkitImageSmoothingEnabled = false;
                ctx.msImageSmoothingEnabled = false;
                ctx.imageSmoothingEnabled = false;

                loop();
            }

            function ball_gravity() {
                if(ball.y < ball.floor) return true;
                ctx.fillStyle = "#111";
                return false;
            }

            function update() {

                if (ball_gravity()) {
                    ball.y+=1.2*t;
                    t++;
                }
                else t = 1;
              }

            function draw() {

                ctx.fillStyle = "#111";
                ctx.scale(1/3,1/3);
                ctx.drawImage(sprites,ball.x,ball.y);
                ctx.scale(1.5,1.5);
                ctx.drawImage(netImage,0,2*floor-h_net);
                ctx.drawImage(net2Image,2*(W-w_net/2),2*floor-h_net);
                ctx.setTransform(1, 0, 0, 1, 0, 0);
            }

            function loop() {
                ctx.fillStyle = "#6FD683";
                ctx.fillRect(0, 0, W, H);
                ctx.fillStyle = "#AEE4E4";
                ctx.fillRect(0, 0, W, floor-3);
                draw();
                update();
                requestAnimationFrame(loop);

              }


            init();


    </script>
</body>
</html>
